"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e="marpitSVGPolyfill:setZoomFactor,",t=Symbol(),o=Symbol();function r(e=document){if(e[t])return e[t];let o=!0;const r=()=>{o=!1,delete e[t]};Object.defineProperty(e,t,{configurable:!0,value:r});const i=n();if(i.length>0){const t=()=>{for(const t of i)t({target:e});o&&window.requestAnimationFrame(t)};t()}return r}const n=()=>"Apple Computer, Inc."===navigator.vendor?[s]:[];let i,l;function s(t){const r="object"==typeof t&&t.target||document,n="object"==typeof t?t.zoom:t;window[o]||(Object.defineProperty(window,o,{configurable:!0,value:!0}),window.addEventListener("message",(({data:t,origin:o})=>{if(o===window.origin)try{if(t&&"string"==typeof t&&t.startsWith(e)){const[,e]=t.split(","),o=Number.parseFloat(e);Number.isNaN(o)||(l=o)}}catch(e){console.error(e)}})));let s=!1;Array.from(r.querySelectorAll("svg[data-marpit-svg]"),(e=>{var t,o,r,a;e.style.transform||(e.style.transform="translateZ(0)");const c=n||l||e.currentScale||1;i!==c&&(i=c,s=c);const d=e.getBoundingClientRect(),{length:f}=e.children;for(let n=0;n<f;n+=1){const i=e.children[n],l=i.getScreenCTM();if(l){const e=null!==(o=null===(t=i.x)||void 0===t?void 0:t.baseVal.value)&&void 0!==o?o:0,n=null!==(a=null===(r=i.y)||void 0===r?void 0:r.baseVal.value)&&void 0!==a?a:0,s=i.firstElementChild,{style:f}=s;f.transformOrigin||(f.transformOrigin=`${-e}px ${-n}px`),f.transform=`scale(${c}) matrix(${l.a}, ${l.b}, ${l.c}, ${l.d}, ${l.e-d.left}, ${l.f-d.top}) translateZ(0.0001px)`}}})),!1!==s&&Array.from(r.querySelectorAll("iframe"),(({contentWindow:t})=>{null==t||t.postMessage(`${e}${s}`,"null"===window.origin?"*":window.origin)}))}i=1,l=void 0,exports.default=r,exports.observe=r,exports.polyfills=n,exports.webkit=s;
